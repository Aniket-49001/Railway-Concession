<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Profile - Sehat</title>
  <style>
    body{font-family:Segoe UI, Roboto, Arial;margin:0;display:flex;align-items:center;justify-content:center;min-height:100vh;background:linear-gradient(135deg,#eafbea,#dff3df)}
    .card{background:#fff;padding:2rem;border-radius:12px;max-width:720px;width:100%;box-shadow:0 10px 40px rgba(0,0,0,.06);}
    h2{margin:0 0 .5rem}
    .muted{color:#666;margin-bottom:1rem}
    button{padding:.6rem 1rem;border-radius:8px;background:#d32f2f;color:#fff;border:0;cursor:pointer}
  </style>
</head>
<body>
  <div class="card">
    <h2>Your Profile</h2>
    <p id="email" class="muted">Loading...</p>
    <button id="logout">Log out</button>
  </div>

  <script>
    (async function(){
      const el = document.getElementById('email');
      try{
        const res = await fetch('/api/profile');
        if(res.ok){ const body = await res.json(); el.textContent = body.email; }
        else { window.location.href = 'login-page.html'; }
      } catch(err){ console.error(err); window.location.href='login-page.html'; }

      document.getElementById('logout').addEventListener('click', async ()=>{
        try{ await fetch('/api/logout', { method:'POST' }); window.location.href='login-page.html'; }
        catch(e){ console.error(e); window.location.href='login-page.html'; }
      });
    })();
  </script>
</body>
</html>
